{"version":3,"sources":["images/header__logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","utils/api.js","utils/constants.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/popup__successful-register.svg","images/popup__err-register.svg","components/InfoTooltip.js","components/App.js","index.js"],"names":["Header","email","loggedIn","onSignOut","React","useState","isMobileButtonOpen","setIsMobileButtonOpen","useEffect","className","src","logo","alt","onClick","CurrentUserContext","createContext","Card","link","cardId","handleCardClick","onCardLike","onCardDelete","owner","name","likes","userContext","useContext","isLiked","some","i","_id","type","id","length","Main","onEditProfile","onAddPlace","onEditAvatar","onCardClick","cards","avatar","about","map","props","Footer","api","options","this","url","baseUrl","response","ok","json","Promise","reject","statusText","token","fetch","method","headers","then","_handleResponse","data","body","JSON","stringify","object","password","ImagePopup","onClose","card","PopupWithForm","title","submitButtonText","isOpen","children","onSubmit","EditProfilePopup","onUpdateUser","setName","description","setDescription","currentUser","e","preventDefault","value","onChange","target","minLength","maxLength","placeholder","required","EditAvatarPopup","onUpdateAvatar","inputValue","useRef","current","ref","AddPlacePopup","inputPlaceName","inputPlaceLink","Login","onSetEmail","onLogin","setEmail","setPassword","to","Register","onRegister","ProtectedRoute","Component","component","InfoTooltip","success","successText","successfulImg","errImg","withRouter","tokenCheck","history","useHistory","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","isInfoTooltipSuccess","setIsInfoTooltipSuccess","isInfoTooltipText","setIsInfoTooltipText","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","handleSetEmail","localStorage","getItem","getUser","res","getInitialCards","reverse","catch","err","console","log","loginUser","push","closeAllPopups","Provider","removeItem","path","setItem","registerUser","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","updateProfileInfo","newProfile","createCard","updateProfileAvatar","newAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0b9cb282.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header__logo.c2821b38.svg\";","import React from 'react';\nimport logo from '../images/header__logo.svg';\n\nfunction Header({ email, loggedIn, onSignOut }) {\n  const [isMobileButtonOpen, setIsMobileButtonOpen] = React.useState(false);\n\n  React.useEffect(() => {\n    aa();\n  }, [loggedIn]);\n\n  function aa() {\n    setIsMobileButtonOpen(false);\n  }\n\n  function changeMobileButton() {\n    const value = !isMobileButtonOpen;\n    setIsMobileButtonOpen(value);\n  }\n\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={logo} alt=\"Место\" />\n      <div className={`header__container ${(!loggedIn)||(isMobileButtonOpen) ? 'header__container_visible' : ''} ${isMobileButtonOpen ? 'header__container_open' : ''}`}>\n        <p className={`header__mail ${(loggedIn)&&(isMobileButtonOpen) ? 'header__mail_visible' : ''}`}>{(email !== 'Войти') ? ((email !== 'Регистрация') ? email : '') : ''}</p>\n        <button className={`header__button ${isMobileButtonOpen ? 'header__button_open' : ''}`} onClick={onSignOut}>{(email === 'Войти') || (email === 'Регистрация') ? email : 'Выйти'}</button>\n      </div>\n      <button className={`header__mobile-button ${loggedIn ? 'header__mobile-button_visible' : ''} ${isMobileButtonOpen ? 'header__mobile-button_open' : ''}`} onClick={changeMobileButton}></button>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({link, cardId, handleCardClick, onCardLike, onCardDelete, owner, name, likes}) {\r\n  const userContext = React.useContext(CurrentUserContext);\r\n  const isLiked = likes.some(i => i === userContext._id);\r\n  function handleClick() {\r\n    handleCardClick({name, link});\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike({cardId, likes});\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete({cardId});\r\n  }\r\n\r\n  return (\r\n      <div className=\"card\">\r\n        <img className=\"card__image\" src={link} alt={name} onClick={handleClick} />\r\n        {userContext._id === owner ? (<button type=\"button\" className=\"card__trash-button\" onClick={handleDeleteClick} ></button>) : (<></>) }\r\n        <p className=\"card__text\">{name}</p>\r\n        <button type=\"button\" className={isLiked ? 'card__like-button card__like-button_active' : 'card__like-button'} id=\"like\" onClick={handleLikeClick} ></button>\r\n        <p className=\"card__like-counter\">{likes.length}</p>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete}) {\r\n  const userContext = React.useContext(CurrentUserContext);\r\n  return (\r\n    <main className=\"main\">\r\n        <section className=\"profile\">\r\n          <div className=\"profile__avatar\">\r\n            <img className=\"profile__img\" src={userContext.avatar} alt=\"Ваш аватар\" />\r\n            <div className=\"profile__overlay\" onClick={onEditAvatar}></div>\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <p className=\"profile__author\">{userContext.name}</p>\r\n            <button type=\"button\" className=\"profile__edit-button\" onClick={onEditProfile}></button>\r\n            <p className=\"profile__subject\">{userContext.about}</p>\r\n          </div>\r\n          <button type=\"button\" className=\"profile__add-button\" onClick={onAddPlace}></button>\r\n        </section>\r\n        <section className=\"cards\">\r\n          {\r\n          cards.map(({_id, ...props}) =>\r\n          <Card key={_id} onCardLike={onCardLike} onCardDelete={onCardDelete} handleCardClick={onCardClick} cardId={_id} {...props} />)\r\n          }\r\n        </section>\r\n      </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__text\">&#169; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import {config} from './constants';\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this.url = options.baseUrl;\r\n  }\r\n\r\n  _handleResponse(response){\r\n    if (response.ok) {\r\n      return response.json();\r\n    } else {\r\n      return Promise.reject(response.statusText);\r\n    }\r\n  }\r\n\r\n  getUser(token) {\r\n    return fetch(`${this.url}/users/me`,\r\n    {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(this._handleResponse);\r\n  }\r\n\r\n  getInitialCards(token) {\r\n    return fetch(`${this.url}/cards`,\r\n    {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(this._handleResponse);\r\n  }\r\n\r\n  updateProfileInfo(data, token) {\r\n    return fetch(`${this.url}/users/me`,\r\n      {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          name: data.name,\r\n          about: data.object\r\n        })\r\n      }\r\n    )\r\n      .then(this._handleResponse);\r\n  }\r\n\r\n  updateProfileAvatar(data, token) {\r\n    return fetch(`${this.url}/users/me/avatar`,\r\n      {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          avatar: data.avatar\r\n        })\r\n      }\r\n    )\r\n      .then(this._handleResponse);\r\n  }\r\n\r\n  createCard(data, token) {\r\n    return fetch(`${this.url}/cards`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          name: data.name,\r\n          link: data.object\r\n        })\r\n      }\r\n    )\r\n      .then(this._handleResponse);\r\n  }\r\n\r\n  deleteCard(id, token) {\r\n    return fetch(`${this.url}/cards/${id}`,\r\n      {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'authorization': `Bearer ${token}`\r\n        }\r\n      }\r\n    )\r\n      .then(this._handleResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(id, isLiked, token) {\r\n    if (isLiked) {\r\n      return fetch(`${this.url}/cards/likes/${id}`,\r\n      {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'authorization': `Bearer ${token}`\r\n        }\r\n      }\r\n    )\r\n      .then(this._handleResponse);\r\n    } else {\r\n      return fetch(`${this.url}/cards/likes/${id}`,\r\n      {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'authorization': `Bearer ${token}`\r\n        }\r\n      }\r\n    )\r\n      .then(this._handleResponse);\r\n    }\r\n  }\r\n\r\n  registerUser(data) {\r\n    return fetch(`${this.url}/signup`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          email: data.email,\r\n          password: data.password\r\n        })\r\n      }\r\n    )\r\n    .then(this._handleResponse);\r\n  }\r\n\r\n  loginUser(data) {\r\n    return fetch(`${this.url}/signin`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          password: data.password,\r\n          email: data.email\r\n        })\r\n      }\r\n    )\r\n    .then(this._handleResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api(config);\r\n\r\nexport default api;\r\n","export const config = {\r\n  baseUrl: 'https://api.maxsin.students.nomoreparties.co',\r\n};\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({onClose, card }) {\r\n  return (\r\n    <div className={card ? 'popup popup_opened': 'popup'} id=\"photo\">\r\n      <div className=\"popup__photo-container\">\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={onClose}></button>\r\n        <img className=\"popup__photo-image\" src={card ? card.link : ''} alt={card ? card.name : ''} />\r\n        <p className=\"popup__photo-text\">{card ? card.name : ''}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm({title, name, submitButtonText, isOpen, onClose, children, onSubmit}) {\r\n  return (\r\n    <div className={isOpen ? 'popup popup_opened': 'popup'} id={name}>\r\n      <form className=\"popup__container\" onSubmit={onSubmit} >\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={onClose}></button>\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        {children}\r\n        <button type=\"submit\" className=\"popup__submit-button\">{submitButtonText}</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({\r\n      name: name,\r\n      object: description,\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n\r\n\r\n  return (\r\n    <PopupWithForm  title=\"Редактировать профиль\" name=\"editPopup\" submitButtonText=\"Сохранить\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit} >\r\n      <input type=\"text\" value={name || ''} onChange={handleNameChange} className=\"popup__input\" id=\"name\" minLength=\"2\" maxLength=\"40\" placeholder=\"Имя\" required name=\"name\" />\r\n      <span className=\"popup__text-error\" id=\"name-error\"></span>\r\n      <input type=\"text\" value={description || ''} onChange={handleDescriptionChange} className=\"popup__input\" id=\"subject\" placeholder=\"О себе\" minLength=\"2\" maxLength=\"200\" required name=\"object\" />\r\n      <span className=\"popup__text-error\" id=\"subject-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n  const inputValue = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: inputValue.current.value\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm  title=\"Обновить аватар\" name=\"avatarPopup\" submitButtonText=\"Сохранить\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit} >\r\n      <input type=\"url\" className=\"popup__input popup__input_type_avatar\" id=\"source\" placeholder=\"Ссылка на аватарку\" required name=\"object\" ref={inputValue} />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\r\n  const inputPlaceName = React.useRef();\r\n  const inputPlaceLink = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({\r\n      name: inputPlaceName.current.value,\r\n      object: inputPlaceLink.current.value\r\n    });\r\n    inputPlaceName.current.value = '';\r\n    inputPlaceLink.current.value = '';\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm  title=\"Новое место\" name=\"addPopup\" submitButtonText=\"Создать\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit} >\r\n      <input type=\"text\" className=\"popup__input\" id=\"place\" placeholder=\"Название\" minLength=\"1\" maxLength=\"30\" required name=\"name\" ref={inputPlaceName} />\r\n      <span className=\"popup__text-error\" id=\"place-error\"></span>\r\n      <input type=\"url\" className=\"popup__input\" id=\"source\" placeholder=\"Ссылка на картинку\" required name=\"object\" ref={inputPlaceLink} />\r\n      <span className=\"popup__text-error\" id=\"source-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Login({ onSetEmail, onLogin }) {\r\n  React.useEffect(() => {onSetEmail({ email: 'Регистрация'})},[]);\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!email || !password){\r\n      return;\r\n    }\r\n    onLogin({ password, email});\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <form className=\"auth__container\" onSubmit={handleSubmit}>\r\n        <h2 className=\"auth__title\">Вход</h2>\r\n        <input type=\"email\" value={email} className=\"auth__input\" placeholder=\"Email\" required onChange={handleEmailChange} />\r\n        <input type=\"password\" value={password}  className=\"auth__input\" placeholder=\"Пароль\" required onChange={handlePasswordChange} />\r\n        <button type=\"submit\" className=\"auth__submit-button\">Войти</button>\r\n        <Link to=\"/signup\" className=\"auth__redirect\">Ещё не зарегистрированы? Регистрация</Link>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register({ onSetEmail, onRegister }) {\r\n  React.useEffect(() => {onSetEmail({ email: 'Войти'})}, []);\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onRegister({ password, email})\r\n  }\r\n\r\n  return (\r\n      <div className=\"auth\">\r\n        <form className=\"auth__container\" onSubmit={handleSubmit}>\r\n          <h2 className=\"auth__title\">Регистрация</h2>\r\n          <input type=\"email\" value={email} className=\"auth__input\" placeholder=\"Email\" required onChange={handleEmailChange} />\r\n          <input type=\"password\" value={password} className=\"auth__input\" placeholder=\"Пароль\" required onChange={handlePasswordChange} />\r\n          <button type=\"submit\" className=\"auth__submit-button\">Зарегистрироваться</button>\r\n          <Link to=\"/signin\" className=\"auth__redirect\">Уже зарегистрированы? Войти</Link>\r\n        </form>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />\r\n      }\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","export default __webpack_public_path__ + \"static/media/popup__successful-register.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/popup__err-register.d4ce2a26.svg\";","import React from 'react';\r\nimport successfulImg from '../images/popup__successful-register.svg';\r\nimport errImg from '../images/popup__err-register.svg';\r\n\r\nfunction InfoTooltip({ isOpen, success, successText, onClose }) {\r\n  return (\r\n    <div className={isOpen ? 'popup popup_opened': 'popup'}>\r\n      <div className=\"popup__container popup__container_register\">\r\n        <button type=\"button\" className=\"popup__close-button popup__close-button_register\" onClick={onClose}></button>\r\n        <img className=\"popup__image\" src={success ? successfulImg : errImg} alt={success ? 'галочка в кружке' : 'крестик в кружке'}></img>\r\n        <h2 className=\"popup__title popup__title_register\">{successText}</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport api from '../utils/api';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { Route, Switch, Redirect, useHistory, withRouter } from 'react-router-dom';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n  React.useEffect(() => { tokenCheck() }, []);\n\n  const history = useHistory();\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [isInfoTooltipSuccess, setIsInfoTooltipSuccess] = React.useState(false);\n  const [isInfoTooltipText, setIsInfoTooltipText] = React.useState('');\n  const [selectedCard, setSelectedCard] = React.useState();\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n\n  function handleSetEmail(data) {\n    setEmail(data.email);\n  }\n\n  function handleRegister(data) {\n    api.registerUser(data)\n      .then((res) => {\n        history.push('/signin');\n        setIsInfoTooltipText('Вы успешно зарегистрировались!');\n        setIsInfoTooltipOpen(true);\n        setIsInfoTooltipSuccess(true);\n      })\n      .catch((err) => {\n        setIsInfoTooltipText('Что-то пошло не так! Попробуйте еще раз.');\n        setIsInfoTooltipOpen(true);\n        setIsInfoTooltipSuccess(false);\n      });\n  }\n\n  function handleHeaderButton() {\n    if (email === 'Регистрация') {\n      history.push('/signup');\n    } else {\n      if (email !== 'Войти') {\n        localStorage.removeItem('token');\n        handleLoggedIn();\n      }\n      history.push('/signin');\n    }\n  }\n\n  function handleLoggedIn() {\n    setLoggedIn(false);\n  }\n\n  function handleLogin(data) {\n    api.loginUser(data)\n      .then((res) => {\n        localStorage.setItem('token', res.token);\n        tokenCheck();\n      })\n      .catch((err) => {\n        console.log(`Ошибка входа: ${err}`);\n        setIsInfoTooltipText('Что-то пошло не так! Попробуйте еще раз.');\n        setIsInfoTooltipOpen(true);\n        setIsInfoTooltipSuccess(false);\n      });\n  }\n\n  function tokenCheck() {\n    if (localStorage.getItem('token')){\n      const token = localStorage.getItem('token');\n      api.getUser(token)\n        .then((res) => {\n          loginUser(res);\n          history.push('/');\n        })\n        .catch((err) => console.log('Ошибка проверки токена'));\n    }\n  }\n\n  function loginUser(data) {\n    setLoggedIn(true);\n    handleSetEmail(data);\n    setCurrentUser(data);\n    const token = localStorage.getItem('token');\n    api.getInitialCards(token)\n      .then((data) => {\n        setCards(data.reverse());\n      })\n      .catch((err)=>{\n        console.log(`Ошибка запроса карточек: ${err}`);\n      });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i === currentUser._id);\n    const token = localStorage.getItem('token');\n    api.changeLikeCardStatus(card.cardId, !isLiked, token)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card.cardId ? newCard : c);\n        setCards(newCards);\n      })\n      .catch((err)=>{\n        console.log(`Ошибка лайка: ${err}`);\n      });\n  }\n\n  function handleCardDelete(id) {\n    const token = localStorage.getItem('token');\n    api.deleteCard(id.cardId, token)\n      .then(() => {\n        const newCards = cards.filter((c) => {\n          return !(c._id === id.cardId)\n        });\n        setCards(newCards);\n      })\n      .catch((err)=>{\n        console.log(`Ошибка удаления карточки: ${err}`);\n      });\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleCardClick = (data) => {\n    setSelectedCard(data);\n  };\n\n  const handleUpdateUser = (data) => {\n    const token = localStorage.getItem('token');\n    api.updateProfileInfo(data, token)\n      .then((newProfile) => {\n        setCurrentUser(newProfile);\n        closeAllPopups();\n      })\n      .catch((err)=>{\n        console.log(`Ошибка обновления профиля: ${err}`);\n      });\n  };\n\n  const handleUpdateAvatar = (data) => {\n    const token = localStorage.getItem('token');\n    api.updateProfileAvatar(data, token)\n      .then((newAvatar) => {\n        setCurrentUser(newAvatar);\n        closeAllPopups();\n      })\n      .catch((err)=>{\n        console.log(`Ошибка обновления аватара: ${err}`);\n      });\n  };\n\n  const handleAddPlace = (data) => {\n    const token = localStorage.getItem('token');\n    api.createCard(data, token)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err)=>{\n        console.log(`Ошибка создания карточки: ${err}`);\n      });\n  };\n\n  const closeAllPopups = () => {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard();\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header email={email} loggedIn={loggedIn} onSignOut={handleHeaderButton} />\n        <Switch>\n          <Route path=\"/signin\">\n            <Login onSetEmail={handleSetEmail} onLogin={handleLogin} />\n          </Route>\n          <Route path=\"/signup\">\n            <Register onSetEmail={handleSetEmail} onRegister={handleRegister} />\n          </Route>\n          <ProtectedRoute path=\"/\" loggedIn={loggedIn} component={Main} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick} cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete} />\n          <Route>\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlace} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n        <ImagePopup onClose={closeAllPopups} card={selectedCard} />\n        <InfoTooltip isOpen={isInfoTooltipOpen} success={isInfoTooltipSuccess} onClose={closeAllPopups} successText={isInfoTooltipText} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default withRouter(App);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}